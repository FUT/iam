// Generated by CoffeeScript 1.5.0
(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};$(function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v;return v="/iam/log_in/:id",h="/iam/log_out/:id",p="/iam/menu",o=!1,s="",t=["alt","ctrl","shift"],i=function(){return $(".iam-settings-header").on("click",function(){return $(".iam-settings").toggle()}),$("#iam-menu").on("click","td.attribute",function(){var e,t;e=$(this).parents("tr"),t=e.attr("href");if(t)return l(t)}),$("#iam-menu tr.sign-out").on("click",function(){var e;e=$(this).attr("href");if(e)return c(e)}),$.each(t,function(){var e,t;return e=$(".iam-"+this+"-settings input"),t="iam-"+this+"-checked",e[0].checked=$.cookie(t)==="true",e.on("click",function(){return $.cookie(t,this.checked)})})},r=function(e){var t;return t=$("<div class='iam-notice'>"+e+"</div>"),$("body").append(t),t.fadeIn(200).delay(1e3).fadeOut(600)},l=function(e){return $.post(e,function(e){return window.location.reload(),r(e.notice)})},c=function(e){return $.ajax({url:e,type:"DELETE",success:function(e){return window.location.reload(),r(e.notice)}})},a=function(t){var n;return n=[192,221],e.call(n,t)>=0},n=function(e){var n,r,i,s;for(i=0,s=t.length;i<s;i++){n=t[i],r=$.cookie("iam-"+n+"-checked")==="true";if(r!==e[""+n+"Key"])return!1}return!0},u=function(){return $(document.getSelection().focusNode).find("input, textarea").length>0},d=function(e){var t;if(e.match(/^\d+$/))return t=v.replace(/:id/,e),l(t);if(e)return r(""+e+" is invalid id.")},f=function(){return o?d(s):$.get(p,function(e){return $("body").append(e),i()}),s=""},$(document).on("keydown",function(e){var t;if(!u()&&a(e.keyCode)&&n(e))return f(),o=!o,$("#iam-menu").remove();if(48<=(t=e.keyCode)&&t<=57)return s+=String.fromCharCode(e.keyCode)})})}).call(this);