(function(){$(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d;d="/iam/log_in/:id";c="/iam/log_out/:id";h="/iam/menu";s=false;i="";e=["alt","ctrl","shift"];r=function(){$(".iam-settings-header").on("click",function(){return $(".iam-settings").toggle()});$("#iam-menu").on("click","td.attribute",function(){var e,t;e=$(this).parents("tr");t=e.attr("href");if(t)return f(t)});$("#iam-menu tr.sign-out").on("click",function(){var e;e=$(this).attr("href");if(e)return l(e)});return $.each(e,function(){var e,t;e=$(".iam-"+this+"-settings input");t="iam-"+this+"-checked";e[0].checked=$.cookie(t)==="true";return e.on("click",function(){return $.cookie(t,this.checked)})})};n=function(e){var t;t=$("<div class='iam-notice'>"+e+"</div>");$("body").append(t);return t.fadeIn(200).delay(1e3).fadeOut(600)};f=function(e){return $.post(e,function(e){window.location.reload();return n(e.notice)})};l=function(e){return $.ajax({url:e,type:"DELETE",success:function(e){window.location.reload();return n(e.notice)}})};u=function(e){return String.fromCharCode(e)==="Ã€"};t=function(t){var n,r,i,s;for(i=0,s=e.length;i<s;i++){n=e[i];r=$.cookie("iam-"+n+"-checked")==="true";if(r!==t[""+n+"Key"])return false}return true};o=function(){return $(document.getSelection().focusNode).find("input, textarea").length>0};p=function(e){var t;if(e.match(/^\d+$/)){t=d.replace(/:id/,e);return f(t)}else{if(e)return n(""+e+" is invalid id.")}};a=function(){if(s){p(i)}else{$.get(h,function(e){$("body").append(e);return r()})}return i=""};return $(document).on("keydown",function(e){var n;if(!o()&&u(e.keyCode)&&t(e)){a();s=!s;return $("#iam-menu").remove()}else{if(48<=(n=e.keyCode)&&n<=57){return i+=String.fromCharCode(e.keyCode)}}})})}).call(this)
